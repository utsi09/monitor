<root BTCPP_format="4">
    <BehaviorTree ID="MainTree">
        <Sequence name="MainLoop">
            
            <Action ID="UpdateSystemState" 
                    topic_vel="/vel" 
                    topic_heading="/heading"

                    out_vel="{@current_vel}"
                    out_heading="{@current_heading}"
                    out_w="{@current_w}"/>

            <Parallel failure_threshold="1" success_threshold="4">
                <Action ID="LidarCheck" name="LidarCheck"  topic="/lidar_points" min_hz="9.0"/>
                <Action ID="CameraCheck" name="CameraCheck" topic="/zed/zed_node/rgb/color/rect/image/compressed" min_hz="10.0"/>
                <Action ID="ImuCheck" name="ImuCheck"    topic="/imu/data" min_hz="50.0"/>
                <Action ID="GpsCheck" name="GpsCheck"    topic="/fix" min_hz="1.0"/>
            </Parallel>

            <Action ID="CalculateFTTI" 
                    in_speed="{@current_vel}"/>
            
        </Sequence>
    </BehaviorTree>
</root>